var PROVIDER_URL_BASE = 'https://smartlock.google.com/iframe/request';(function(){/*
 @license
 OpenYOLO for Web
 Copyright 2017 The OpenYOLO for Web Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 -----------------------------------------------------------------------------

 This file also contains code imported from tslib
 https://github.com/Microsoft/tslib

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
*****************************************************************************/
    var w="function"==typeof Object.defineProperties?Object.defineProperty:function(g,d,f){g!=Array.prototype&&g!=Object.prototype&&(g[d]=f.value)},E="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function G(g,d){if(d){for(var f=E,h=g.split("."),r=0;r<h.length-1;r++){var c=h[r];c in f||(f[c]={});f=f[c]}h=h[h.length-1];r=f[h];c=d(r);c!=r&&null!=c&&w(f,h,{configurable:!0,writable:!0,value:c})}}
    G("Object.setPrototypeOf",function(g){return g?g:"object"!=typeof"".__proto__?null:function(d,f){d.__proto__=f;if(d.__proto__!==f)throw new TypeError(d+" is not extensible");return d}});G("Object.assign",function(g){return g?g:function(d,f){for(var h=1;h<arguments.length;h++){var g=arguments[h];if(g)for(var c in g)Object.prototype.hasOwnProperty.call(g,c)&&(d[c]=g[c])}return d}});function K(){K=function(){};E.Symbol||(E.Symbol=L)}var M=0;function L(g){return"jscomp_symbol_"+(g||"")+M++}
    function N(){K();var g=E.Symbol.iterator;g||(g=E.Symbol.iterator=E.Symbol("iterator"));"function"!=typeof Array.prototype[g]&&w(Array.prototype,g,{configurable:!0,writable:!0,value:function(){return X(this)}});N=function(){}}function X(g){var d=0;return Y(function(){return d<g.length?{done:!1,value:g[d++]}:{done:!0}})}function Y(g){N();g={next:g};g[E.Symbol.iterator]=function(){return this};return g}function Z(g){N();var d=g[Symbol.iterator];return d?d.call(g):X(g)}
    G("Promise",function(g){function d(c){this.i=0;this.R=void 0;this.b=[];var d=this.O();try{c(d.resolve,d.reject)}catch(v){d.reject(v)}}function f(){this.b=null}if(g)return g;f.prototype.i=function(c){this.b||(this.b=[],this.O());this.b.push(c)};f.prototype.O=function(){var c=this;this.v(function(){c.R()})};var h=E.setTimeout;f.prototype.v=function(c){h(c,0)};f.prototype.R=function(){for(;this.b&&this.b.length;){var c=this.b;this.b=[];for(var d=0;d<c.length;++d){var f=c[d];delete c[d];try{f()}catch(A){this.P(A)}}}this.b=
        null};f.prototype.P=function(c){this.v(function(){throw c;})};d.prototype.O=function(){function c(c){return function(h){f||(f=!0,c.call(d,h))}}var d=this,f=!1;return{resolve:c(this.wa),reject:c(this.P)}};d.prototype.wa=function(c){if(c===this)this.P(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof d)this.Aa(c);else{a:switch(typeof c){case "object":var f=null!=c;break a;case "function":f=!0;break a;default:f=!1}f?this.ua(c):this.ia(c)}};d.prototype.ua=function(c){var d=void 0;
        try{d=c.then}catch(v){this.P(v);return}"function"==typeof d?this.Ba(d,c):this.ia(c)};d.prototype.P=function(c){this.ja(2,c)};d.prototype.ia=function(c){this.ja(1,c)};d.prototype.ja=function(c,d){if(0!=this.i)throw Error("Cannot settle("+c+", "+d|"): Promise already settled in state"+this.i);this.i=c;this.R=d;this.ta()};d.prototype.ta=function(){if(this.b){for(var c=this.b,d=0;d<c.length;++d)c[d].call(),c[d]=null;this.b=null}};var r=new f;d.prototype.Aa=function(d){var c=this.O();d.v(c.resolve,c.reject)};
        d.prototype.Ba=function(d,f){var c=this.O();try{d.call(f,c.resolve,c.reject)}catch(A){c.reject(A)}};d.prototype.then=function(c,f){function h(d,c){return"function"==typeof d?function(c){try{g(d(c))}catch(x){n(x)}}:c}var g,n,r=new d(function(d,c){g=d;n=c});this.v(h(c,g),h(f,n));return r};d.prototype["catch"]=function(d){return this.then(void 0,d)};d.prototype.v=function(d,f){function c(){switch(h.i){case 1:d(h.R);break;case 2:f(h.R);break;default:throw Error("Unexpected state: "+h.i);}}var h=this;
            this.b?this.b.push(function(){r.i(c)}):r.i(c)};d.resolve=function(c){return c instanceof d?c:new d(function(d){d(c)})};d.reject=function(c){return new d(function(d,f){f(c)})};d.race=function(c){return new d(function(f,h){for(var g=Z(c),n=g.next();!n.done;n=g.next())d.resolve(n.value).v(f,h)})};d.b=function(c){var f=Z(c),h=f.next();return h.done?d.resolve([]):new d(function(c,g){function n(d){return function(f){r[d]=f;t--;t||c(r)}}var r=[],t=0;do r.push(void 0),t++,d.resolve(h.value).v(n(r.length-
            1),g),h=f.next();while(!h.done)})};d.$jscomp$new$AsyncExecutor=function(){return new f};return d});
    G("String.prototype.startsWith",function(g){return g?g:function(d,f){if(null==this)throw new TypeError("The 'this' value for String.prototype.startsWith must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype.startsWith must not be a regular expression");var h=this+"";d+="";for(var g=h.length,c=d.length,n=Math.max(0,Math.min(f|0,h.length)),v=0;v<c&&n<g;)if(h[n++]!=d[v++])return!1;return v>=c}});
    (function(g){function d(a,b){function e(){this.constructor=a}aa(a,b);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}function f(a,b){var e=void 0;return new (e||(e=Promise))(function(l,k){function u(a){try{c(b.next(a))}catch(I){k(I)}}function d(a){try{c(b["throw"](a))}catch(I){k(I)}}function c(b){b.done?l(b.value):(new e(function(a){a(b.value)})).then(u,d)}c((b=b.apply(a,[])).next())})}function h(a,b){function e(b){return function(a){return l([b,a])}}function l(e){if(u)throw new TypeError("Generator is already executing.");
        for(;k;)try{if(u=1,d&&(c=d[e[0]&2?"return":e[0]?"throw":"next"])&&!(c=c.call(d,e[1])).done)return c;if(d=0,c)e=[0,c.value];switch(e[0]){case 0:case 1:c=e;break;case 4:return k.label++,{value:e[1],done:!1};case 5:k.label++;d=e[1];e=[0];continue;case 7:e=k.la.pop();k.g.pop();continue;default:if(!(c=k.g,c=0<c.length&&c[c.length-1])&&(6===e[0]||2===e[0])){k=0;continue}if(3===e[0]&&(!c||e[1]>c[0]&&e[1]<c[3]))k.label=e[1];else if(6===e[0]&&k.label<c[1])k.label=c[1],c=e;else if(c&&k.label<c[2])k.label=c[2],
            k.la.push(e);else{c[2]&&k.la.pop();k.g.pop();continue}}e=b.call(a,k)}catch(ba){e=[6,ba],d=0}finally{u=c=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var k={label:0,a:function(){if(c[0]&1)throw c[1];return c[1]},g:[],la:[]},u,d,c,f;return f={next:e(0),"throw":e(1),"return":e(2)},"function"===typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f}function r(a){a=ca.exec(a);if(!a)return null;var b={scheme:a[1],W:a[2]};a[3]&&(b.query=a[3]);a[4]&&(b.Ja=a[4]);return b}function c(a){return"undefined"===
        typeof a}function n(a){return"string"===typeof a&&0<a.length}function v(a){return"boolean"===typeof a}function A(a){if(!n(a))return!1;a=r(a);var b;(b=!a||a.query||a.Ja||!a.W.startsWith("//"))||(b=a.W.indexOf("/",a.W.startsWith("//")?2:0),b=0>b?null:a.W.substring(b));return b?!1:!0}function H(a){var b;!(b=!(a&&"object"===typeof a)||!n(a.id)||!A(a.authMethod)||"authDomain"in a&&!A(a.authDomain)||"password"in a&&!n(a.password)||"displayName"in a&&!n(a.displayName))&&(b="profilePicture"in a)&&(b=a.profilePicture,
        n(b)?(b=r(b),b=!b||"http"!==b.scheme&&"https"!==b.scheme||!b.W.startsWith("//")?!1:!!b):b=!1,b=!b);return b||"exchangeToken"in a&&!n(a.exchangeToken)||"idToken"in a&&!n(a.idToken)||"generatedPassword"in a&&!n(a.generatedPassword)||"proxiedAuthRequired"in a&&!v(a.proxiedAuthRequired)?!1:!0}function P(){return!0}function O(){return!0}function t(a){return function(b){return!!b&&"object"===typeof b&&"id"in b&&"string"===typeof b.id&&a(b.args)}}function z(a,b,e){return{type:a,data:{id:b,args:e,ack:!1}}}
        function x(a,b){function e(e){var k=e.data;if(!(k&&"object"===typeof k&&"type"in k&&"data"in k&&e.data.type===a&&(0,da[a])(e.data.data)))return!1;b(e.data.data,e.data.type,e);return!0}e.toString=function(){return a+" message listener"};return e}function Q(){var a=new Uint32Array(2);window.crypto.getRandomValues(a);return a[0].toString(16)+a[1].toString(16)}function R(a){return f(this,function(){var b,e;return h(this,function(l){switch(l.label){case 0:if(!J)return[2,Promise.resolve(a)];if("undefined"!==
            typeof TextEncoder)var k=(new TextEncoder("utf-8")).encode(a);else{k=[];for(var c=0,d=0;d<a.length;d++){var f=a.charCodeAt(d);128>f?k[c++]=f:2048>f?(k[c++]=f>>6|192,k[c++]=f&63|128):55296===(f&64512)&&d+1<a.length&&56320===(a.charCodeAt(d+1)&64512)?(f=65536+((f&1023)<<10)+(a.charCodeAt(++d)&1023),k[c++]=f>>18|240,k[c++]=f>>12&63|128,k[c++]=f>>6&63|128,k[c++]=f&63|128):(k[c++]=f>>12|224,k[c++]=f>>6&63|128,k[c++]=f&63|128)}k=new Uint8Array(k)}b=k;l.label=1;case 1:return l.g.push([1,3,,4]),[4,J.digest("SHA-256",
            b)];case 2:e=l.a();l=[];k=new DataView(e);for(c=0;c<k.byteLength;c+=4)d=("00000000"+k.getUint32(c).toString(16)).slice(-8),l.push(d);return[2,l.join("")];case 3:return l.a(),[2,Promise.resolve(a)];case 4:return[2]}})})}function S(a){var b=Object.keys(a).reduce(function(b,l){b[l]=a[l].l;return b},Object.create(null));return Object.freeze(b)}function ea(){var a=window;F&&a.removeEventListener("message",F);F=x("verifyPing",function(b,a,l){l.source.postMessage({type:"verifyAck",data:b},l.origin||"*")});
            a.addEventListener("message",F)}var q=function(){function a(b){this.data=b;this.name="OpenYoloInternalError";this.message=b.message}a.prototype.h=function(){return y.ga(this.Va())};a.prototype.Va=function(){return{type:this.data.c,message:this.data.code+": "+this.data.message}};a.i=function(){return new a({code:"ackTimeout",c:"initializationError",message:"A parent frame failed to acknowledge the handshake. This can be due, in nested context, to the absence of the handshake responder library."})};
                a.R=function(){return new a({code:"establishSecureChannelTimeout",c:"initializationError",message:"The Secure Channel failed to initialize in a timely manner. This can be due to network latency or a wrong configuration."})};a.ua=function(){return new a({code:"parentVerifyTimeout",c:"initializationError",message:"The credentials provider frame failed to verify the ancestor frames in a timely manner."})};a.sa=function(b){return new a({code:"illegalStateError",c:"initializationError",message:"An internal error happened: "+
                b})};a.Aa=function(){return new a({code:"providerInitializationFailed",c:"initializationError",message:"The credentials provider frame failed to initialize."})};a.v=function(){return new a({code:"apiDisabled",c:"initializationError",message:"The API has been disabled by the user\u2019s preference or has not been enabled in the OpenYolo configuration."})};a.Za=function(b){return new a({code:"untrustedOrigin",c:"configurationError",message:"A parent frame does not belong to an authorized origin. "+
                ("Ensure the configuration of OpenYolo contains '"+b+"'.")})};a.ta=function(){return new a({code:"parentIsNotRoot",c:"configurationError",message:"The caller window is an IFrame which is not authorized in OpenYoloconfiguration."})};a.$a=function(){return new a({code:"userCanceled",c:"userCanceled",message:"The user canceled the operation."})};a.$=function(){return new a({code:"noCredentialsAvailable",c:"noCredentialsAvailable",message:"No credential is available for the current user."})};a.ja=function(){return new a({code:"operationCanceled",
                    c:"operationCanceled",message:"The operation was canceled."})};a.Ha=function(){return new a({code:"clientDisposed",c:"clientDisposed",message:"The API has been disposed from the current context."})};a.S=function(b){return new a({code:"requestFailed",c:"requestFailed",message:"The API request failed to resolve: "+b})};a.ya=function(){return new a({code:"requestTimeout",c:"requestFailed",message:"The API request timed out."})};a.ia=function(){return new a({code:"illegalConcurrentRequest",c:"illegalConcurrentRequest",
                    message:"The request could not be resolved because another operation is currently pending."})};a.Ba=function(b){return new a({code:"unknownRequest",c:"requestFailed",message:"The '"+b+"' request sent could not be handled by the credentials provider."})};a.O=function(){return new a({code:"browserWrappingRequired",c:"browserWrappingRequired",message:"The current request requires using navigator.credentials."})};a.Ya=function(){return new a({code:"unsupportedBrowser",c:"unsupportedBrowser",message:"Unsupported browser - API disabled"})};
                a.Wa=function(){return new a({code:"unknownError",c:"unknownError",message:"Unknown error."})};a.P=function(b,a){return"data"in b?b.data.code===a:!1};return a}(),y=function(){function a(b,a){this.type=a;this.name="OpenYoloError";this.message=b}a.ga=function(b){return new a(b.message,b.type)};return a}(),aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e])},ca=/^(?:([^:/?#]+):)((?:\/\/)?[^?#]*)(?:\\?([^#]*))?(?:#([^?]*))?$/,
            da=(Object.assign||function(a){for(var b,e=1,l=arguments.length;e<l;e++){b=arguments[e];for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(a[k]=b[k])}return a})({},{ack:n,verifyPing:n,verifyAck:n,readyForConnect:n,channelConnect:n,channelReady:n,channelError:O},{disableAutoSignIn:t(c),disableAutoSignInResult:t(c),retrieve:t(function(){return!0}),hintAvailable:t(P),hintAvailableResult:t(v),hint:t(P),save:t(H),saveResult:t(v),proxy:t(H),proxyResult:t(function(){return!0}),showProvider:t(function(){return!0}),
                credential:t(H),error:t(O),cancelLastOperation:t(c),cancelLastOperationResult:t(c)}),J=null;window.crypto&&(J=window.crypto.subtle||window.crypto.webkitSubtle);var B=function(){function a(){var b=this;this.K=new Promise(function(a,l){b.ma=a;b.ba=l})}a.prototype.resolve=function(b){if(!this.ma)throw Error("Promise Resolver already disposed.");this.ma(b);this.dispose()};a.prototype.reject=function(b){if(!this.ba)throw Error("Promise Resolver already disposed.");this.ba(b);this.dispose()};a.prototype.dispose=
            function(){this.ba=this.ma=null};return a}(),fa=function(a){function b(b,l){var e=a.call(this)||this;e.Sa=b;e.za=!0;e.Ta=setTimeout(e.Ua.bind(e),l);return e}d(b,a);b.prototype.resolve=function(b){a.prototype.resolve.call(this,b);this.clear()};b.prototype.reject=function(b){a.prototype.reject.call(this,b);this.clear()};b.prototype.clear=function(){clearTimeout(this.Ta)};b.prototype.s=function(){return!this.za};b.prototype.Ua=function(){this.ba&&(this.za=!1,this.reject(this.Sa))};return b}(B);(function(a){function b(){return a.call(this)||
            this}d(b,a);b.prototype.cancel=function(){this.reject(b.i)};b.b="CancellablePromise { Operation Cancelled }";b.i=Error(b.b);return b})(B);var ga=function(){return function(){this.name="TimeoutRacerError";this.message="The timeout has expired."}}(),ha=function(){function a(b){this.error=new ga;this.ca=new fa(this.error,b)}a.prototype.race=function(b){return Promise.race([this.ca.K,b])};a.prototype.stop=function(){this.ca.clear()};a.prototype.s=function(){return this.ca.s()};a.prototype.na=function(b){if(b!==
            this.error)throw b;};a.prototype.dispose=function(){this.ca.dispose()};return a}(),T=function(){function a(){}a.prototype.race=function(b){return b};a.prototype.stop=function(){};a.prototype.s=function(){return!1};a.prototype.na=function(b){throw b;};a.prototype.dispose=function(){};return a}(),ia=function(){function a(b){var a=this;this.port=b;this.J=[];this.fa=[];this.va=function(b){for(var e=!1,l=0;l<a.J.length;l++){var c=a.J[l];c&&(e=!!c.Pa(b)||e)}if(!e)for(l=0;l<a.fa.length;l++)a.fa[l](b)};this.port.addEventListener("message",
            this.va);this.port.start()}a.Ga=function(b,e,l){var k=window;return f(this,function(){var c,d,f,g,m;return h(this,function(u){switch(u.label){case 0:return[4,a.b(k,l)];case 1:u.a(),c=new MessageChannel,d=new B,f=x("channelReady",function(){d.resolve()}),g=x("channelError",function(b){d.reject(y.ga(b))}),k.addEventListener("message",f),k.addEventListener("message",g),b.postMessage({type:"channelConnect",data:e},"*",[c.port2]),u.label=2;case 2:return u.g.push([2,4,5,6]),[4,d.K];case 3:return u.a(),
            [2,new a(c.port1)];case 4:throw m=u.a(),c.port1.close(),m;case 5:return k.removeEventListener("message",f),k.removeEventListener("message",g),[7];case 6:return[2]}})})};a.b=function(b,a){var e=new B,c=x("readyForConnect",function(b){a===b&&e.resolve()});b.addEventListener("message",c);e.K.then(function(){b.removeEventListener("message",c)},function(){b.removeEventListener("message",c)});return e.K};a.wa=function(b,e,c){return f(this,function(){var l,d,g;return h(this,function(){l=null;d=new B;g=x("channelConnect",
            function(k,u,g){return f(this,function(){var f;return h(this,function(u){switch(u.label){case 0:return"string"!==typeof k?[2]:[4,R(k)];case 1:f=u.a();if(f!==c)return[2];if(-1===e.indexOf(g.origin))return d.reject(q.Za(g.origin)),[2];if(!g.ports)return d.reject(q.sa("channel initialization message does not contain ports")),[2];l=g.ports[0];b.parent.postMessage({type:"channelReady",data:c},g.origin);d.resolve(new a(l));return[2]}})})});b.addEventListener("message",g);d.K.then(function(){b.removeEventListener("message",
            g)},function(){b.removeEventListener("message",g)});b.parent.postMessage({type:"readyForConnect",data:c},"*");return[2,d.K]})})};a.prototype.send=function(b){this.port.postMessage(b)};a.prototype.Na=function(b,a){var e=this;if(!b||!a)throw q.sa("invalid type or listener");this.J.push({Pa:x(b,function(b,c,l){b.ack&&e.port.postMessage({type:"ack",data:b.id});a(b,c,l)}),lb:a});return this.J.length-1};a.prototype.Xa=function(b){this.J[b]&&(this.J[b]=null)};a.prototype.dispose=function(){this.port.removeEventListener("message",
            this.va);this.J=[];this.fa=[];this.port.close()};return a}(),m=function(){function a(b,a,c){void 0===c&&(c=Q());this.frame=b;this.channel=a;this.id=c;this.aa=new B;this.ka=[];this.U=!1;this.Y=null}a.prototype.B=function(b,a){return f(this,function(){var e;return h(this,function(c){switch(c.label){case 0:this.Y=a||new T,this.Ra(),this.G(b),c.label=1;case 1:return c.g.push([1,3,,4]),[4,this.Y.race(this.aa.K)];case 2:return[2,c.a()];case 3:throw e=c.a(),this.Y.na(e),this.frame.ha(),this.dispose(),q.ya().h();
            case 4:return[2]}})})};a.prototype.Ra=function(){var b=this;this.u("error",function(a){b.reject(a?y.ga(a):q.Wa().h());b.dispose()});this.u("showProvider",function(a){b.clearTimeout();b.frame.display(a)})};a.prototype.resolve=function(b){this.aa.resolve(b);this.frame.ha()};a.prototype.reject=function(b){this.aa.reject(b);"illegalConcurrentRequest"!==b.type&&this.frame.ha()};a.prototype.u=function(b,a){function e(e,l,d){if(e.id!==c.id)return!1;a(e.args,b,d);return!0}var c=this;e.toString=function(){return b+
            " message handler"};this.ka.push(this.channel.Na(b,e))};a.prototype.Fa=function(){var a=this;this.ka.forEach(function(b){a.channel.Xa(b)});this.ka=[]};a.prototype.clearTimeout=function(){null!==this.Y&&this.Y.stop()};a.prototype.dispose=function(){this.U||(this.clearTimeout(),this.Fa(),this.aa.dispose(),this.U=!0)};return a}(),U=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}d(b,a);b.prototype.G=function(){var a=this;this.u("cancelLastOperationResult",function(){return a.V()});
            this.channel.send(z("cancelLastOperation",this.id,void 0))};b.prototype.V=function(){this.resolve();this.dispose()};return b}(m),ja=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}d(b,a);b.prototype.G=function(a){var b=this;this.u("credential",function(a){return b.V(a)});this.channel.send(z("retrieve",this.id,a))};b.prototype.V=function(a){this.resolve(a);this.dispose()};return b}(m),ka=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}d(b,a);b.prototype.G=
            function(a){var b=this;this.u("saveResult",function(a){a?b.resolve():b.reject(q.$a().h());b.dispose()});this.channel.send(z("save",this.id,a))};return b}(m),la=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}d(b,a);b.prototype.G=function(){var a=this;this.u("disableAutoSignInResult",function(){a.resolve();a.dispose()});this.channel.send(z("disableAutoSignIn",this.id,void 0))};return b}(m),ma=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}d(b,a);b.prototype.G=
            function(a){var b=this;this.u("hintAvailableResult",function(a){b.resolve(a);b.dispose()});this.channel.send(z("hintAvailable",this.id,a))};return b}(m),na=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}d(b,a);b.prototype.G=function(a){var b=this;this.u("credential",function(a){return b.V(a)});this.channel.send(z("hint",this.id,a))};b.prototype.V=function(a){this.resolve(a);this.dispose()};return b}(m),C=S({Z:{l:"openyolo://id-and-password"},Ca:{l:"https://accounts.google.com"},
            bb:{l:"https://www.facebook.com"},cb:{l:"https://www.linkedin.com"},Da:{l:"https://login.live.com"},fb:{l:"https://www.paypal.com"},hb:{l:"https://twitter.com"},ib:{l:"https://login.yahoo.com"}}),oa=S({Ca:{l:"https://accounts.google.com"},Da:{l:"https://login.live.com"}});(function(a){a.signIn="signIn";a.signUp="signUp";a["continue"]="continue";a.use="use"})(g.Ea||(g.Ea={}));var V=function(){function a(){this.map={}}a.prototype.La=function(a){this.map[a.id+"::"+a.type]=a};a.prototype.j=function(a){return this.map[a]};
                a.Ka=function(a){return a.id+"::"+(a.authMethod===C.Z?"password":"federated")};return a}(),pa=function(){function a(){}a.prototype.A=function(){return Promise.resolve()};a.prototype.j=function(){return f(this,function(){return h(this,function(){throw q.$().h();})})};a.prototype.save=function(){return f(this,function(){return h(this,function(){return[2]})})};a.prototype.hint=function(){return f(this,function(){return h(this,function(){throw q.$().h();})})};a.prototype.C=function(){return f(this,function(){return h(this,
            function(){return[2,!1]})})};a.prototype.m=function(){return f(this,function(){return h(this,function(){return[2]})})};a.prototype.F=function(){return f(this,function(){return h(this,function(){throw q.S("Cannot proxy login through the browser.").h();})})};return a}(),qa=function(){function a(a){this.ea=a;this.ra=new V}a.prototype.A=function(){return f(this,function(){return h(this,function(a){switch(a.label){case 0:return a.g.push([0,2,,3]),[4,this.ea.preventSilentAccess()];case 1:return[2,a.a()];
                case 2:return a.a(),[2];case 3:return[2]}})})};a.prototype.j=function(a){return f(this,function(){var b,c,d,f;return h(this,function(e){switch(e.label){case 0:if(a){var k={password:!1,Ia:{Qa:[],jb:[]},kb:!1},l=a.supportedAuthMethods.slice(),u=l.indexOf(C.Z);-1!==u&&(k.password=!0,l.splice(u,1));k.Ia.Qa=l;b=k}else b=void 0;e.label=1;case 1:return e.g.push([1,3,,4]),[4,this.ea.get(b)];case 2:return c=e.a(),[3,4];case 3:throw d=e.a(),f="navigator.credentials error: ("+d.message+")",q.S(f).h();case 4:if(!c)throw q.$().h();
                this.ra.La(c);e={id:c.id,authMethod:"federated"===c.type?c.provider:C.Z,displayName:c.name||void 0,profilePicture:c.iconURL||void 0,proxiedAuthRequired:!1};c instanceof PasswordCredential&&(e.password=c.password);return[2,e]}})})};a.prototype.save=function(a){return f(this,function(){var b,c,d;return h(this,function(e){switch(e.label){case 0:var k;b=a.authMethod===C.Z?k=new PasswordCredential({id:a.id,type:"password",name:a.displayName,iconURL:a.profilePicture,password:a.password}):k=new FederatedCredential({id:a.id,
                name:a.displayName,iconURL:a.profilePicture,provider:a.authMethod});e.label=1;case 1:return e.g.push([1,3,,4]),[4,this.ea.store(b)];case 2:return e.a(),[3,4];case 3:throw c=e.a(),d="navigator.credentials error: ("+c.message+")",q.S(d).h();case 4:return[2]}})})};a.prototype.hint=function(){return f(this,function(){return h(this,function(){throw q.$().h();})})};a.prototype.C=function(){return f(this,function(){return h(this,function(){return[2,!1]})})};a.prototype.m=function(){return f(this,function(){return h(this,
            function(){return[2]})})};a.prototype.F=function(a){return f(this,function(){var b,c,d,f,g;return h(this,function(e){switch(e.label){case 0:b=window.location.protocol+"//"+window.location.host+"/signin";c=this.ra.j(V.Ka(a));if(!c||"password"!==c.type)throw q.S("Invalid credential.").h();e.label=1;case 1:return e.g.push([1,3,,4]),[4,fetch(b,{method:"POST",credentials:c})];case 2:return d=e.a(),[3,4];case 3:throw f=e.a(),q.S(f.message).h();case 4:if(200!==d.status)throw q.S("Status code "+d.status).h();
                return[4,d.text()];case 5:return g=e.a(),[2,{statusCode:d.status,responseText:g}]}})})};return a}(),D,ra=function(){function a(a,c,d,f,g,h){this.da=a;this.Ma=c;this.X=f;D||(D=document.createElement("style"),D.type="text/css",D.appendChild(document.createTextNode("\n.openyolo-hidden {\n  display: none;\n}\n\n.openyolo-visible {\n  position: fixed;\n  border: none;\n  z-index: 9999;\n}\n\n.openyolo-visible.bottomSheet {\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 320px;\n}\n\n.openyolo-visible.navPopout {\n  top: 0;\n  right: 0;\n  width: 320px;\n  height: 320px;\n}\n\n.openyolo-visible.fullScreen {\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n")),
                document.getElementsByTagName("head")[0].appendChild(D));this.f=this.da.createElement("iframe");this.f.src=""+g+("?client="+encodeURIComponent(d))+("&id="+this.Ma)+("&renderMode="+f);h&&(a=encodeURIComponent(JSON.stringify(h)),this.f.src+="&preloadRequest="+a);this.f.className="openyolo-hidden";this.f.hidden=!0;this.da.body.appendChild(this.f)}a.prototype.display=function(a){this.f.className="";this.f.hidden=!1;this.f.classList.add("openyolo-visible");this.f.classList.add(this.X);(a.height||a.width)&&
            "fullScreen"!==this.X&&(a.height&&(this.f.style.height=a.height+"px"),a.width&&(this.f.style.width=a.width+"px"))};a.prototype.ha=function(){this.f.className="openyolo-hidden";this.f.hidden=!0;this.f.style.height="";this.f.style.width=""};a.prototype.dispose=function(){this.da.body.removeChild(this.f)};return a}(),sa=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}d(b,a);b.prototype.G=function(a){var b=this;this.u("proxyResult",function(a){b.resolve(a);b.dispose()});this.channel.send(z("proxy",
            this.id,a))};return b}(m),F,ta=/android|iphone|ipod|iemobile/i,ua=["bottomSheet","navPopout","fullScreen"],va=function(){function a(a,c,d){this.o=a;this.channel=c;this.U=!1;this.D=d||("undefined"===typeof navigator.credentials||"function"!==typeof navigator.credentials.preventSilentAccess||"https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname?new pa:new qa(navigator.credentials))}a.prototype.C=function(a,c){return f(this,function(){var b,
            e;return h(this,function(d){switch(d.label){case 0:this.w(),b=new ma(this.o,this.channel),d.label=1;case 1:return d.g.push([1,3,,4]),[4,b.B(a,c)];case 2:return[2,d.a()];case 3:e=d.a();if(c.s())this.N();else if("browserWrappingRequired"===e.type)return[2,this.D.C(a)];throw e;case 4:return[2]}})})};a.prototype.hint=function(a,c){return f(this,function(){var b,e;return h(this,function(d){switch(d.label){case 0:this.w(),b=new na(this.o,this.channel),d.label=1;case 1:return d.g.push([1,3,,4]),[4,b.B(a,
            c)];case 2:return[2,d.a()];case 3:e=d.a();if(c.s())this.N();else if("browserWrappingRequired"===e.type)return[2,this.D.hint(a)];throw e;case 4:return[2]}})})};a.prototype.j=function(a,c){return f(this,function(){var b,e;return h(this,function(d){switch(d.label){case 0:this.w(),b=new ja(this.o,this.channel),d.label=1;case 1:return d.g.push([1,3,,4]),[4,b.B(a,c)];case 2:return[2,d.a()];case 3:e=d.a();if(c.s())this.N();else if("browserWrappingRequired"===e.type)return[2,this.D.j(a)];throw e;case 4:return[2]}})})};
                a.prototype.save=function(a,c){return f(this,function(){var b,d;return h(this,function(e){switch(e.label){case 0:this.w(),b=new ka(this.o,this.channel),e.label=1;case 1:return e.g.push([1,3,,4]),[4,b.B(a,c)];case 2:return[2,e.a()];case 3:d=e.a();if(c.s())this.N();else if("browserWrappingRequired"===d.type)return[2,this.D.save(a)];throw d;case 4:return[2]}})})};a.prototype.F=function(a,c){return f(this,function(){var b,d;return h(this,function(e){switch(e.label){case 0:this.w(),b=new sa(this.o,this.channel),
                    e.label=1;case 1:return e.g.push([1,3,,4]),[4,b.B(a,c)];case 2:return[2,e.a()];case 3:d=e.a();if(c.s())this.N();else if("browserWrappingRequired"===d.type)return[2,this.D.F(a)];throw d;case 4:return[2]}})})};a.prototype.A=function(a){return f(this,function(){var b,c,d,f;return h(this,function(e){switch(e.label){case 0:this.w(),b=new la(this.o,this.channel),e.label=1;case 1:return e.g.push([1,3,,4]),c=b.B(void 0,a),d=this.D.A(),[4,Promise.all([c,d])];case 2:return e.a(),[3,4];case 3:throw f=e.a(),
                a.s()&&this.N(),f;case 4:return[2]}})})};a.prototype.m=function(a){return f(this,function(){var b,c;return h(this,function(d){switch(d.label){case 0:this.w(),b=new U(this.o,this.channel),d.label=1;case 1:return d.g.push([1,3,,4]),[4,b.B(void 0,a)];case 2:return[2,d.a()];case 3:c=d.a();if("browserWrappingRequired"===c.type)return[2,this.D.m()];throw c;case 4:return[2]}})})};a.prototype.N=function(){f(this,function(){var a,c;return h(this,function(b){switch(b.label){case 0:this.w(),a=new U(this.o,this.channel),
                    b.label=1;case 1:return b.g.push([1,3,,4]),[4,a.B(void 0,void 0)];case 2:return[2,b.a()];case 3:c=b.a();if("browserWrappingRequired"===c.type)return[2,this.D.m()];throw c;case 4:return[2]}})})};a.prototype.dispose=function(){if(this.U)return Promise.resolve();this.channel.dispose();this.o.dispose();return Promise.resolve()};a.prototype.w=function(){if(this.U)throw q.Ha().h();};return a}(),m=function(){function a(){this.xa="https://provider.openyolo.org";this.T=this.X=this.H=null;ea()}a.b=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          c,d,f){var b=null,e=d&&-1!==ua.indexOf(d)?d:window.parent!==window?"fullScreen":navigator.userAgent.match(ta)?"bottomSheet":"navPopout",g=Q();return Promise.resolve().then(function(){return a.race(R(g))}).then(function(d){b=new ra(document,d,window.location.origin,e,c,f);return a.race(ia.Ga(b.f.contentWindow,g,d))}).then(function(a){return new va(b,a)})["catch"](function(c){null!==b&&b.dispose();a.na(c);throw q.ya().h();})};a.prototype.oa=function(a){this.xa=a;this.reset()};a.prototype.pa=function(a){this.X=
                a;this.reset()};a.prototype.qa=function(a){if(null===a)this.T=null,this.reset();else{if("number"!==typeof a||0>a)throw Error("Invalid timeout. It must be a number greater than or equal to 0. Setting it to 0 disable timeouts.");var b=this.T!==a&&!a;this.T=a;b&&this.reset()}};a.prototype.reset=function(){if(this.H){var a=this.H;this.H=null;a.then(function(a){a.dispose()})}};a.prototype.I=function(b,c){var d=this;this.H||(this.H=a.b(b,this.xa,this.X,c));this.H["catch"](function(){d.reset()});return this.H};
                a.prototype.L=function(a){a=null!==this.T?this.T:a;return 0>=a?new T:new ha(a)};a.prototype.C=function(a){return f(this,function(){var b,c,d;return h(this,function(e){switch(e.label){case 0:return b=this.L(3E3),c={type:"hint",options:a},[4,this.I(b,c)];case 1:return d=e.a(),[4,d.C(a,b)];case 2:return[2,e.a()]}})})};a.prototype.hint=function(a){return f(this,function(){var b,c,d;return h(this,function(e){switch(e.label){case 0:return b={type:"hint",options:a},c=this.L(3E3),[4,this.I(c,b)];case 1:return d=
                    e.a(),[4,d.hint(a,c)];case 2:return[2,e.a()]}})})};a.prototype.j=function(a){return f(this,function(){var b,c,d;return h(this,function(e){switch(e.label){case 0:return b={type:"retrieve",options:a},c=this.L(3E3),[4,this.I(c,b)];case 1:return d=e.a(),[2,d.j(a,c)]}})})};a.prototype.save=function(a){return f(this,function(){var b,c;return h(this,function(d){switch(d.label){case 0:return b=this.L(3E3),[4,this.I(b)];case 1:return c=d.a(),[2,c.save(a,b)]}})})};a.prototype.A=function(){return f(this,function(){var a,
                c;return h(this,function(b){switch(b.label){case 0:return a=this.L(3E3),[4,this.I(a)];case 1:return c=b.a(),[2,c.A(a)]}})})};a.prototype.F=function(a){return f(this,function(){var b,c;return h(this,function(d){switch(d.label){case 0:return b=this.L(1E4),[4,this.I(b)];case 1:return c=d.a(),[2,c.F(a,b)]}})})};a.prototype.m=function(){return f(this,function(){var a,c;return h(this,function(b){switch(b.label){case 0:return a=this.L(3E3),[4,this.I(a)];case 1:return c=b.a(),[2,c.m(a)]}})})};return a}(),
            p=function(){function a(){this.M=Promise.reject(q.Ya().h())}a.prototype.oa=function(){};a.prototype.pa=function(){};a.prototype.qa=function(){};a.prototype.reset=function(){};a.prototype.C=function(){return this.M};a.prototype.hint=function(){return this.M};a.prototype.j=function(){return this.M};a.prototype.save=function(){return this.M};a.prototype.A=function(){return this.M};a.prototype.m=function(){return this.M};a.prototype.F=function(){return this.M};return a}(),wa=function(a){var b=a.hasOwnProperty("crypto")&&
                "getRandomValues"in a.crypto;a=a.hasOwnProperty("crypto")&&("subtle"in a.crypto||"webkitSubtle"in a.crypto);return b&&a}(window)?new m:new p,W=window;W.openyolo=wa;m.prototype.setProviderUrlBase=m.prototype.oa;m.prototype.setRenderMode=m.prototype.pa;m.prototype.setTimeouts=m.prototype.qa;m.prototype.hintsAvailable=m.prototype.C;m.prototype.hint=m.prototype.hint;m.prototype.retrieve=m.prototype.j;m.prototype.save=m.prototype.save;m.prototype.disableAutoSignIn=m.prototype.A;m.prototype.proxyLogin=
            m.prototype.F;m.prototype.cancelLastOperation=m.prototype.m;p.prototype.setProviderUrlBase=p.prototype.oa;p.prototype.setRenderMode=p.prototype.pa;p.prototype.setTimeouts=p.prototype.qa;p.prototype.hintsAvailable=p.prototype.C;p.prototype.hint=p.prototype.hint;p.prototype.retrieve=p.prototype.j;p.prototype.save=p.prototype.save;p.prototype.disableAutoSignIn=p.prototype.A;p.prototype.proxyLogin=p.prototype.F;p.prototype.cancelLastOperation=p.prototype.m;W.OpenYoloError=y;y.prototype.type=y.prototype.type;
        y.prototype.message=y.prototype.message;g.eb=q;g.ab=C;g.gb=oa})(this.Oa=this.Oa||{});}).call(this);
(function(){'use strict';/*
 Copyright (c) Microsoft Corporation. All rights reserved.
 Licensed under the Apache License, Version 2.0 (the "License"); you may not use
 this file except in compliance with the License. You may obtain a copy of the
 License at http://www.apache.org/licenses/LICENSE-2.0

 THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
 WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
 MERCHANTABLITY OR NON-INFRINGEMENT.

 See the Apache Version 2.0 License for specific language governing permissions
 and limitations under the License.
*/
    var c=/^openyolo:\/\//,d=!1,e=function(a){this.a=a;this.b=new RegExp("^"+a)},f=function(a,b){return b.map(function(b){return b.replace(a.b,"openyolo://")})},g=function(a,b){a={supportedAuthMethods:f(a,b.supportedAuthMethods)};b.supportedIdTokenProviders&&(a.supportedIdTokenProviders=b.supportedIdTokenProviders);b.context&&(a.context=b.context);return a},h=function(a,b){a={id:b.id,authMethod:b.authMethod.replace(c,a.a)};b.password&&(a.password=b.password);b.authDomain&&(a.authDomain=b.authDomain);
        b.displayName&&(a.displayName=b.displayName);b.profilePicture&&(a.profilePicture=b.profilePicture);b.idToken&&(a.idToken=b.idToken);return a};e.prototype.hintsAvailable=function(a){a=g(this,a);return openyolo.hintsAvailable(a)};e.prototype.hintsAvailable=e.prototype.hintsAvailable;e.prototype.hint=function(a){var b=this;a=g(this,a);return openyolo.hint(a).then(function(a){return h(b,a)})};e.prototype.hint=e.prototype.hint;
    e.prototype.retrieve=function(a){var b=this;a=g(this,a);return openyolo.retrieve(a).then(function(a){return h(b,a)})};e.prototype.retrieve=e.prototype.retrieve;e.prototype.disableAutoSignIn=function(){return openyolo.disableAutoSignIn()};e.prototype.disableAutoSignIn=e.prototype.disableAutoSignIn;e.prototype.cancelLastOperation=function(){return openyolo.cancelLastOperation()};e.prototype.cancelLastOperation=e.prototype.cancelLastOperation;e.prototype.setTimeouts=function(a){openyolo.setTimeouts(a)};
    e.prototype.setTimeouts=e.prototype.setTimeouts;e.prototype.setRenderMode=function(a){openyolo.setRenderMode(a)};e.prototype.setRenderMode=e.prototype.setRenderMode;var k=window;k.PROVIDER_URL_BASE&&openyolo.setProviderUrlBase(k.PROVIDER_URL_BASE);var l=new e("smartlock://"),m=new e("googleyolo://"),n=window;n.smartlock=l;n.googleyolo=m;k.smartlock=l;k.googleyolo=m;n.onSmartLockLoad&&(d=!0,n.onSmartLockLoad(l));n.onGoogleYoloLoad&&(d=!0,n.onGoogleYoloLoad(m));
    document.addEventListener("DOMContentLoaded",function(){d||(n.onGoogleYoloLoad&&(d=!0,n.onGoogleYoloLoad(m)),n.onSmartLockLoad&&(d=!0,n.onSmartLockLoad(l)))});}).call(this);